
format elfobj

importx "_strlen" strlen

#err
function init_user()
	#sd c
	#setcall c sys_folder()
	#if not c
	#mkdir
	#captures
	#cd sys
	#if not version
	#include
	#write
	const d=!
	chars a="capture" #biggest
	const d1=!
	chars *={0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x01,0x00,0x00,0x00}
	const d11=!-d1
	chars *="jpeg"
	const d2=!
	chars *={0x20,0x03,0x00,0x00}
	const d22=!-d2
	chars *="mpeg"
	const d3=!
	chars *={0x03,0x00,0x00,0x00,0x03,0x00,0x00,0x00}
	const d33=!-d3
	chars *="search"
	const d4=!
	chars *={0x73,0x72,0x63,0x3d,0x22,0x00,0x22,0x00,0x00,0x00}
	const d44=!-d4
	chars *="sound"
	const d5=!
	chars *={0x02,0x00,0x00,0x00,0x80,0xbb,0x00,0x00,0x10,0x00,0x00,0x00}
	const d55=!-d5
	chars *="stage"
	const d6=!
	chars *={0x0a,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x01,0x00,0x00,0x00}
	const d66=!-d6
	chars *="update"
	const d7=!
	chars *={0x01,0x00,0x00,0x00}
	const d77=!-d7
i3
	sd b=!-d
	sd c^a
	add b c
	chars e={d11,d22,d33,d44,d55,d66,d77}
	ss f^e
	while c!=b
		setcall c init_sys(c,f#)
		inc f
	endwhile
	return 0
endfunction

function init_sys(sd c,sd sz)
	sd len
	setcall len strlen(c)
	add c len
	inc c
	add c sz
	return c
endfunction
